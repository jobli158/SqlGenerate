{"remainingRequest":"D:\\办公\\webutil\\webutil\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\webutil\\webutil\\src\\views\\sql.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\webutil\\webutil\\src\\views\\sql.vue","mtime":1656464089329},{"path":"D:\\办公\\webutil\\webutil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650718948123},{"path":"D:\\办公\\webutil\\webutil\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1650718948111},{"path":"D:\\办公\\webutil\\webutil\\node_modules\\babel-loader\\lib\\index.js","mtime":1650718948118},{"path":"D:\\办公\\webutil\\webutil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650718948123},{"path":"D:\\办公\\webutil\\webutil\\node_modules\\vue-loader\\lib\\index.js","mtime":1650718972654}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0b3AgZnJvbSAnLi4vY29tcG9uZW50cy90b3AudnVlJwppbXBvcnQgZm9vdCBmcm9tICcuLi9jb21wb25lbnRzL2Zvb3Rlci52dWUnCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdzcWwnLAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlzcWw6ICcnLAoJCQlyZXM6ICcnCgkJfQoJfSwKCWNvbXBvbmVudHM6IHsKCQl0b3AsCgkJZm9vdAoJfSwKCW1ldGhvZHM6IHsKCQlzdWIoKSB7CgkJCWxldCBkYXRhID0gewoJCQkJc3FsOiB0aGlzLnNxbAoJCQl9CgkJCXRoaXMucmVzID0gJycKCQkJdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRodHRwcyArICIvc2F2ZWRhdGFiYXNlIiwgdGhpcy4kcXMuc3RyaW5naWZ5KGRhdGEpKS50aGVuKHJlcyA9PiB7CgkJCQl0aGlzLnJlcyA9IHJlcy5kYXRhCgkJCX0pLmNhdGNoKHJlcyA9PiB7CgkJCQljb25zb2xlKHJlcykKCQkJfSkKCQkJdGhpcy4kbWVzc2FnZSh7CgkJCQltZXNzYWdlOiAn5omn6KGM5oiQ5YqfLOS4uuS/neivgeWHhuehruaAp++8jOivt+WIsOaVsOaNruW6k+afpeeci++8gScsCgkJCQl0eXBlOiAnc3VjY2VzcycKCQkJfSk7CgoJCX0sCgkJY2xlYXIoKSB7CgkJCXRoaXMuc3FsID0gJycKCQl9Cgl9CgoKfQo="},{"version":3,"sources":["sql.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA","file":"sql.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<top></top>\r\n\t\t<div style=\"margin-top: 50px;margin-left:20px ;margin-right: 20px;\">\r\n\t\t\t<el-input type=\"textarea\" :rows=\"8\" placeholder=\"请输入sql语句!\" v-model=\"sql\">\r\n\t\t\t</el-input>\r\n\t\t</div>\r\n\t\t<div class=\"btn\">\r\n\t\t\t<el-button type=\"primary\" @click=\"sub()\">提交</el-button>&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\t<el-button type=\"danger\" @click=\"clear()\">清空</el-button>\r\n\t\t</div>\r\n\t\t<div style=\"padding: 20px;\">\r\n\t\t\t快捷粘贴：<br />\r\n\t\t\t查询数据：select * from 'tablename';\r\n\t\t\t<br />\r\n\t\t\t查询表存在：select count(*) from pg_class where relname = 'tablename';\r\n\t\t\t<br />\r\n\t\t\t查询当前库所有表信息：\r\n\t\t\tselect * from pg_tables;\r\n\t\t\t<br />\r\n\t\t\t查询特定表名及备注：select relname as tabname,\r\n\t\t\tcast(obj_description(relfilenode,'pg_class') as varchar) as comment from pg_class c\r\n\t\t\twhere relname ='tablename';\r\n\t\t\t<br />\r\n\t\t\t查询表结构：select\r\n\t\t\ta.attnum as \"序号\",\r\n\t\t\tc.relname as \"表名\",\r\n\t\t\tcast(obj_description(c.oid) as varchar) as \"表名描述\",\r\n\t\t\ta.attname as \"列名\",\r\n\t\t\tt.typname AS 字段类型,\r\n\t\t\tCASE WHEN t.typlen = -1 THEN a.atttypmod - 4 ELSE t.typlen::integer END AS 字段大小 ,\r\n\t\t\td.description as \"备注\"\r\n\t\t\tfrom\r\n\t\t\tpg_attribute a\r\n\t\t\tleft join pg_description d on\r\n\t\t\td.objoid = a.attrelid\r\n\t\t\tand d.objsubid = a.attnum\r\n\t\t\tleft join pg_class c on\r\n\t\t\ta.attrelid = c.oid\r\n\t\t\tleft join pg_type t on\r\n\t\t\ta.atttypid = t.oid\r\n\t\t\twhere\r\n\t\t\ta.attnum >= 0\r\n\t\t\tand c.relname like 'tablename'\r\n\t\t\torder by\r\n\t\t\tc.relname desc,\r\n\t\t\ta.attnum asc\r\n\t\t\t<br />\r\n\t\t\t删除：DROP TABLE table_name;\r\n\t\t\t<br />\r\n\t\t\t插入：INSERT INTO TABLE_NAME VALUES (value1,value2,value3,...valueN);<br />\r\n\t\t\tINSERT INTO TABLE_NAME (column1, column2, column3,...columnN)\r\n\t\t\tVALUES (value1, value2, value3,...valueN);\r\n\t\t</div>\r\n\t\t<div style=\"margin-top: 20px;padding: 20px;\" v-show=\"res!=''\">\r\n\t\t\t受影响行数：{{res.row}}<br /><br />\r\n\t\t\t<div>\r\n\t\t\t\t<el-table :data=\"res.result\" border>\r\n\t\t\t\t\t<el-table-column :label=\"val\" v-for=\"(val, i) in res.title\" :key=\"i\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">{{res.result[scope.$index][i]}}</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t</el-table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div style=\"height: 100px;\">\r\n\r\n\t\t</div>\r\n\t\t<foot></foot>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport top from '../components/top.vue'\r\n\timport foot from '../components/footer.vue'\r\n\texport default {\r\n\t\tname: 'sql',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsql: '',\r\n\t\t\t\tres: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\ttop,\r\n\t\t\tfoot\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsub() {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsql: this.sql\r\n\t\t\t\t}\r\n\t\t\t\tthis.res = ''\r\n\t\t\t\tthis.$axios.post(this.$https + \"/savedatabase\", this.$qs.stringify(data)).then(res => {\r\n\t\t\t\t\tthis.res = res.data\r\n\t\t\t\t}).catch(res => {\r\n\t\t\t\t\tconsole(res)\r\n\t\t\t\t})\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '执行成功,为保证准确性，请到数据库查看！',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tthis.sql = ''\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.page {\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.top {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 40px;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tmargin-top: 20px;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>\n"]}]}